<!-- index.html (Final Polished Version) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Merger</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <style>
    #pagesContainer {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 1rem;
    }
    #pagesContainer>div {
      touch-action: manipulation;
    }
    /* âœ¨ FIX: Removed the redundant style block for #modalContent */
    @media (max-width: 768px) {
      #pagesContainer {
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
      }
    }
  </style>
</head>

<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center p-4 md:p-8">

  <!-- [ ... The main page content is unchanged ... ] -->
  <h1 class="text-3xl md:text-4xl font-bold mb-6 md:mb-8 tracking-wide text-center">ðŸ“‘ PDF Merger Tool</h1>
  <form id="uploadForm" class="flex flex-col md:flex-row gap-3 items-center bg-gray-800 p-4 md:p-5 rounded-2xl shadow-xl w-full max-w-2xl mb-4">
    <input type="file" name="pdfs" id="pdfs" multiple accept="application/pdf" class="file:mr-3 file:rounded-lg file:border-0 file:bg-purple-600 file:text-white file:px-4 file:py-2 hover:file:bg-purple-700 text-gray-300 w-full md:w-auto transition">
    <button type="submit" class="bg-purple-600 px-6 py-2 rounded-lg hover:bg-purple-700 active:scale-95 transition w-full md:w-auto">Upload</button>
  </form>
  <div id="progressContainer" class="w-full max-w-2xl hidden mb-4">
    <div class="bg-gray-700 rounded-full h-2.5">
      <div id="progressBar" class="bg-purple-600 h-2.5 rounded-full" style="width: 0%"></div>
    </div>
  </div>
  <div id="fileList" class="w-full max-w-4xl bg-gray-800 rounded-2xl p-4 md:p-5 shadow-xl hidden">
    <h2 class="text-lg font-semibold mb-2">Uploaded PDFs</h2>
    <ul id="fileListUl" class="space-y-2"></ul>
  </div>
  <div class="w-full max-w-4xl mt-6 md:mt-8 px-4 md:px-0">
    <div id="pagesContainer"></div>
  </div>
  <div class="flex flex-col md:flex-row gap-3 mt-6 md:mt-8 w-full max-w-2xl flex-shrink-0">
    <input id="newName" type="text" placeholder="New file name" class="px-4 py-2 rounded-lg text-black flex-1 disabled:bg-gray-500">
    <button id="mergeBtn" class="bg-green-600 px-6 py-2 rounded-lg hover:bg-green-700 active:scale-95 transition disabled:bg-green-800 disabled:opacity-60">Merge PDFs</button>
  </div>

  <!-- Modal for Page Preview -->
  <div id="modalOverlay" class="fixed inset-0 bg-black/80 flex items-center justify-center p-4 hidden z-50">
    <div id="modalContent" class="relative">
       <!-- âœ¨ FIX: Added max-w-[90vw] and max-h-[90vh] to ensure the image always fits the screen -->
      <img id="modalImage" src="" alt="Page Preview" class="rounded-md object-contain max-w-[90vw] max-h-[90vh]">
      <div id="modalLoader" class="text-white text-center">Loading high-resolution preview...</div>
    </div>
    <button id="modalClose" class="absolute top-4 right-4 bg-white/20 hover:bg-white/40 rounded-full w-10 h-10 flex items-center justify-center text-white text-2xl transition">
      &times;
    </button>
  </div>

  <script src="script.js"></script>
</body>
</html>